{% load static %} 
{% block content %}
<!-- DataTables -->
<link rel="stylesheet" type="text/css" href="{% static 'css/select2.min.css' %}">

<style type="text/css">
    .filters input {
        width: 100%;
        padding: 3px;
        box-sizing: border-box;
    }
    fieldset {
        border: 2px solid #000 !important;
        margin: 0;
        xmin-width: 0;
        padding: 10px;
        position: relative;
        border-radius: 4px;
        padding-left: 10px!important;
    }
    a{
        cursor: pointer;
    }

</style>

<!-- FORMULARIO  -->
<div id="content_Equipo">
    <div id="addEquipo" style="display: none;">
        <div class="stackbox-header cab_popup" align="center">Registro de Equipos <i class="fa fa-laptop" aria-hidden="true" style="font-size: 30px;float: left;"></i></div>

        <div class="stackbox-body" id="bodyaddEquipo">
            <div class="notification">
                <span class="icon">
                    <i class=""></i>
                </span>
                <span class="text"></span>
                <span class="close"><i class="fa fa-close"></i></span>
            </div>
            <div class="row" align="center">
                <div class="col-xs-12" style="border-color: #1b90ad;">

                    <!-- CAMPOS FORM -->
                    <div id="frm_equipo">
                        <div class="nav-tabs-custom">
                                <ul class="nav nav-tabs" id="tabsIng">
                                    <li class="active"><a href="#tab_GenE" data-toggle="tab" aria-expanded="true" style="font-weight: bold;">Generales</a></li>
                                    <li class=""><a href="#tab_infoE" data-toggle="tab" aria-expanded="false" style="font-weight: bold;">Información Adicional</a></li>
                                </ul>
                                <div class="tab-content" style="border-top: 2px solid #3c8dbc;">
                                    <div class="tab-pane active" id="tab_GenE">
                                        <fieldset>
                                        <legend style="font-size: 14px; text-align: left;border-bottom: 1px solid;background-color: #005196;color: white;padding: 5px;">Datos Generales

                                        <a style="position: relative; left: 2%;font-size: 16px;cursor: pointer;" title="Buscar" href='#popupEquipoHist'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="limpiaPopupEquipoCust('solservEquipoCust');getDataEquipoCust('idEquipoST');" title="Ver Historico Custodios">
                                        <i class="fa fa-user-secret text-green"></i>
                                        </a>
                                        </legend>
                                            
                                        

                                            <div class="col-xs-6" style="border-color: #1b90ad;">
                                                <table style="width: 100%">
                                                    <input type="hidden" id="idEquipoST" name="idEquipoST" value="" />
                                                    <tr>
                                                        <td align="left">*Producto</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="productoEquipoST" class="form-control requerido" text="Producto" readonly style="width: 95%" />
                                                            <input type="hidden" id="idproductoEquipoST"/>
                                                            <a style="position: absolute;right: 2%;font-size: 16px;cursor: pointer;top: 10%;" title="Buscar" href='#popupProducto'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="limpiaPopupProducto('producto_equipo')">
                                                                <i class="fa fa-search text-green"></i>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Codigo Externo</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="codExtEquipoST" class="form-control requerido" text="Codigo" style="width: 95%"/> 
                                                        </td>
                                                    </tr>
                                                    
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">*Marca</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="marcaEquipoST" class="form-control requerido" text="Marca" readonly style="width: 95%"/>
                                                            <input type="hidden" id="idmarcaEquipoST"/>
                                                            <a style="position: absolute;right: 2%;font-size: 16px;cursor: pointer;top: 60%;" title="Buscar" href='#popupMarca'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="limpiaPopupMarca('marca_equipo')">
                                                                <i class="fa fa-search text-green"></i>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">*Criticidad</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <select id="ScritiEquipoST" class="select2" text="Criticidad" style="width: 95%">
                                                                <option value="">Seleccione una Opcion</option>
                                                                {% for item in catalogos %} 
                                                                    {% if item.categoria == 'CRITICIDAD_EQUIPO_ST' %}
                                                                    <option value="{{ item.valor }}">{{ item.label }}</option>
                                                                    {% endif %} 
                                                                {% endfor %}
                                                            </select>    
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="col-xs-6" style="border-color: #1b90ad;">
                                                <table style="width: 100%">
                                                    <tr>
                                                        <td align="left">Codigo</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="codEquipoST" class="form-control" text="Codigo" style="width: 95%"/> </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Modelo</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="modeloEquipoST" class="form-control" text="Modelo" style="width: 95%"/>   
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Referencia</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="referEquipoST" class="form-control" text="Referencia" style="width: 95%"/>   
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">*Tipo Dispositivo</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <select id="StipoDisEquipoST" class="select2 requerido" text="Tipo Dispositivo" style="width: 95%">
                                                                <option value="">Seleccione una Opcion</option>
                                                                {% for item in catalogos %} 
                                                                    {% if item.categoria == 'TIPO_EQUIPO_ST' %}
                                                                    <option value="{{ item.valor }}">{{ item.label }}</option>
                                                                    {% endif %} 
                                                                {% endfor %}
                                                            </select>    
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Color</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="colorEquipoST" class="form-control" text="Color" style="width: 95%"/>   
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                </table>
                                                <input type="hidden" id="tipoEST" value="0" />
                                            </div>
                                        </fieldset>
                                    </div><!--div tab_Gen-->
                                    <div class="tab-pane" id="tab_infoE">
                                        <fieldset>
                                        <legend style="font-size: 14px; text-align: left;border-bottom: 1px solid;background-color: #005196;color: white;padding: 5px;">Información Adicional</legend>
                                            <div class="col-xs-6" style="border-color: #1b90ad;">
                                                <table style="width: 100%">
                                                    <input type="hidden" id="idEquipoST" name="idEquipoST" value="" />
                                                    <tr>
                                                        <td align="left">Serie</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="serieEquipoST" class="form-control" text="Producto" style="width: 95%"/>
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Zona Trabajo</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="zonaEquipoST" class="form-control" text="Zona Trabajo" style="width: 95%"/> 
                                                        </td>
                                                    </tr>
                                                    
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Fecha Compra</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="date" id="fcompraEquipoST" class="form-control" text="Fecha Compra" style="width: 95%"/>
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Administrador</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="administradorEquipoST" class="form-control requerido" text="Administrador" readonly style="width: 95%"/>
                                                            <input type="hidden" id="idadministradorEquipoST"/>
                                                            <input type="hidden" id="cedadministradorEquipoST"/>
                                                            <a style="position: absolute;right: 2%;font-size: 16px;cursor: pointer;top: 67%;" title="Buscar" href='#popupFuncionarios'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="limpiaPopupFuncionario('administrador_equipo')">
                                                                <i class="fa fa-search text-green"></i>
                                                            </a>   
                                                        </td>
                                                    </tr>

                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Estado</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <select id="SestadoAdcEquipoST" class="select2" text="Tipo" style="width: 95%">
                                                                <option value="">Seleccione una Opcion</option>
                                                                {% for item in catalogos %} 
                                                                    {% if item.categoria == 'ESTADO_EQUIPO_ST' %}
                                                                    <option value="{{ item.valor }}">{{ item.label }}</option>
                                                                    {% endif %} 
                                                                {% endfor %}
                                                            </select>    
                                                        </td>
                                                    </tr>   
                                                    <tr height='10px;'></tr>
                                                </table>
                                            </div>
                                            <div class="col-xs-6" style="border-color: #1b90ad;">
                                                <table style="width: 100%">
                                                    <tr>
                                                        <td align="left">Ubicación</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="ubicacionAdcEquipoST" class="form-control" text="Ubicación" readonly style="width: 95%"/>
                                                            <input type="hidden" id="idubicacionAdcEquipoST"/>
                                                            <a style="position: absolute;right: 2%;font-size: 16px;cursor: pointer;top: 10%;" title="Buscar" href='#popupUbicacion'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="limpiaPopupUbicacion('ubicacion_equipos')">
                                                                <i class="fa fa-search text-green"></i>
                                                            </a> 
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Garantia</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="date" id="garantiaEquipoST" class="form-control" text="Garantia" style="width: 95%"/>   
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Dueño</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="duenoEquipoST" class="form-control" text="Dueño" readonly value="PARQUE NACIONAL GALAPAGOS " style="width: 95%"/>
                                                            <input type="hidden" id="idduenoEquipoST" value="89571404-d6bb-11e6-b2e3-000c29e38a2f" />
                                                            <input type="hidden" id="cedduenoEquipoST"/>
                                                            <!--a style="position: absolute;right: 28%;font-size: 16px;cursor: pointer;top: 60%;" title="Buscar" href='#popupPersonas'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="document.getElementById('pagina_enviaPopPer').value='dueno_equipos';cleanBodyTablePersona();">
                                                                <i class="fa fa-search text-green"></i>
                                                            </a-->    
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Proveedor Mantenimiento</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="proveedorEquipoST" class="form-control requerido" text="Proveedor Mantenimiento" readonly style="width: 95%"/>
                                                            <input type="hidden" id="idproveedorEquipoST"/>
                                                            <input type="hidden" id="cedproveedorEquipoST"/>
                                                            <a style="position: absolute;right: 2%;font-size: 16px;cursor: pointer;top: 86%;" title="Buscar" href='#popupPersonas'data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000" onclick="document.getElementById('pagina_enviaPopPer').value='proveedor_equipos';cleanBodyTablePersona();">
                                                                <i class="fa fa-search text-green"></i>
                                                            </a>   
                                                        </td>
                                                    </tr>
                                                </table>  
                                            </div>
                                            <div class="col-xs-12">
                                                <table style="width: 100%">
                                                    <tr height='10px;'></tr>
                                                    <tr>
                                                        <td align="left">Notas</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <textarea id="observacionEquipoST" class="form-control" rows="5" style="width: 100%; font-size: 12px;"></textarea>
                                                        </td>
                                                    </tr>
                                                    <tr height='10px;'></tr>
                                                </table>
                                            </div>
                                        </fieldset>
                                    </div><!--div tab-content-->
                                </div><!--div tab_Con-->
                        </div><!--nav-tabs-custom-->
                    </div>

                </div>
            </div>
        </div>
        <div class="stackbox-footer">
           
            <button class="btn btn-primary" onclick="setInsertUpdateEquipo();">Grabar</button>
            
            <button class="btn btn-default" data-close-stackbox="true">Close</button>
        </div>
    </div>

    <div class="box">

        <div class="box-header">
            <i class="fa fa-list"></i>
            <h3 class="box-title">Lista Equipos</h3><i class="fa fa-desktop" aria-hidden="true" style="font-size: 20px; margin-left: 10px;"></i>
            <div class="botonera" style="float: right; right: 1px;">
                <a onclick="limpiarFormEquipoST();" href='#addEquipo' data-stackbox='true' data-stackbox-position="absolute" data-stackbox-width="1000"><i class="fa fa-plus-circle text-green btn_nuevo"></i></a> 
                <a title="excel" onclick="generarExcel('tabla_equipos',9)"><i class="fa fa-file-excel-o text-green"></i></a>
                <a title="archivo" class="pull-right" onclick="" data-toggle="collapse" href="#collapseArchivo" role="button" aria-expanded="false" aria-controls="collapseEquipo" style="margin-right: 5px;" data-original-title="Collapse"><i class="fa fa-upload text-green" style="position: relative; left: 5px;"></i></a>
                <div class="box-body collapse" style="background-color: white;border: 1px solid black;" id="collapseArchivo">
                    <form id="equipo_form" action="#" method="post">
                        <table>
                            <tr>
                                <td>
                                    <input type="file" name="myfile" id="file_equipo">
                                </td>
                                <td style="width: 5px;"></td>
                                <td>
                                    <a title="Subir Archivo" onclick="subirArchivoEquipo();" style="margin-right: 5px;font-size: 20px;" ><i class="fa fa-upload text-green"></i></a>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
                <!---->
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body">

            <div class="box box-default" style="position: relative;top: 10px;">
                <div class="box-header with-border" style="cursor: move;">
                    <!-- tools box -->
                    <div class="pull-right box-tools">
                        <button type="button" class="btn btn-primary btn-sm pull-right" data-toggle="collapse" href="#collapseEquipo" role="button" aria-expanded="false" aria-controls="collapseEquipo" style="margin-right: 5px;" data-original-title="Collapse">
                            <i class="fa fa-minus"></i></button>
                    </div>
                    <!-- /. tools -->
                    <i class="fa fa-search"></i>
                    <h3 class="box-title">Filtros de Busqueda</h3>
                </div>
                <div class="box-body collapse" style="background-color: white;" id="collapseEquipo">
                    <div class="col-xs-12" align="center" style="box-shadow: 0px 5px 5px 0px;">
                        <table>
                            <tr>
                                <td align="right">Producto</td>
                                <td width="10px"></td>
                                <td>
                                    <input type="text" class="form-control" name="" id="productoST" style="width: 100%;" />
                                </td>
                                <td width="10px"></td>
                                <td align="right">Codigo</td>
                                <td width="10px"></td>
                                <td>
                                    <input type="text" class="form-control" name="" id="codigoST" style="width: 100%;" />
                                </td>
                                <td width="10px"></td>
                                <td align="right">Marca</td>
                                <td width="10px"></td>
                                <td>
                                    <input type="text" class="form-control" name="" id="marcaST" style="width: 100%;" />
                                </td>
                                <td width="10px"></td>
                                <td align="right">Custodio</td>
                                <td width="10px"></td>
                                <td>
                                    <input type="text" class="form-control" name="" id="custodioST" style="width: 100%;" />
                                </td>
                                
                                <td width="10px"></td>
                                <td colspan="3" align="right">
                                    <button type="button" class="btn btn-block btn-success" style="width:80px;float:right;" onclick="buscarEquipoParametros('filtro');">Buscar</button>
                                </td>
                            </tr>
                            <tr height="10px"> </tr>
                        </table>

                    </div>

                </div>
            </div>

            <table id="tabla_equipos" style="font-size: 10px; text-transform: uppercase;font-weight: bold;" class="table table-striped table-bordered" width="100%" cellspacing="0">
                <thead style="background-color: #0073b7;    color: white;">
                    <th>Producto</th>
                    <th>Codigo</th>
	                <th>Estado</th>
                    <th>Modelo</th>
	                <th>Marca</th>
                    <th>Color</th>
	                <th>Ubicacion</th>
	                <th>Custodio</th>
                    <!--th>Tipo<br>Dispositivo</th-->
                    <th>Criticidad</th>
	                <th></th>
	                <th></th>
                </thead>
                <tbody id="bodytabla_equipos">

                </tbody>
            </table>
        </div>
        <!-- /.box-body -->

    </div>
    <!-- /.box -->

</div>
<!-- /.content -->

<!-- AdminLTE datatable -->
<!-- jQuery 3 -->
{% load static %}

<script>
    $(document).ready(function() {
        $(".select2").select2();
        var table = $('#tabla_equipos').DataTable();
        //var f1 = (new Date).getFullYear() + "-01-01";
        //var f2 = (new Date).getFullYear() + "-12-31";
        //var dataini = f1 + "," + f2;
        buscarEquipoParametros("");
    });
 
</script>

{% endblock %}